#!/usr/bin/env node

const http = require('http');

const Global = require('../constant/global'),
    Function = require('../constant/function');

const Main = require('../main');

/**
 * 端口
 */
const port = Function.normalizePort(Global.port); //创建端口
Main.set('port', port); // 设置端口

/**
 * 服务器
 */
const server = http.createServer(Main); // 创建服务器
server.listen(port); // 监听端口
server.on('error', (error) => { // 监听错误
    Function.onError(port, error);
});
server.on('listening', () => { //监听
    Function.onListening(server)
});
