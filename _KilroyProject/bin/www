#!/usr/bin/env node

/**
 * 模块
 */
const http = require('http'),
    Global = require('../constant/Global'),
    Function = require('../constant/Function'),
    app = require('../main');

/**
 * 端口
 */
const port = Function.normalizePort(Global.port); //创建端口
app.set('port', port); // 设置端口

/**
 * 服务器
 */
const server = http.createServer(app); // 创建服务器
server.listen(port); // 监听端口
server.on('error', (error) => { // 监听错误
    Function.onError(port, error);
});
server.on('listening', () => { //监听
    Function.onListening(server)
});
